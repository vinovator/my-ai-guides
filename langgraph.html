<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>LangGraph Refresher</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }

        .sidebar {
            height: 100vh;
            overflow-y: auto;
        }
    </style>
</head>

<body class="bg-gray-50 text-gray-800 flex">
    <aside class="w-64 bg-white border-r border-gray-200 hidden lg:block h-screen fixed overflow-y-auto">
        <div class="p-6 border-b">
            <h1 class="font-bold text-xl text-blue-700">LangGraph</h1><a href="index.html"
                class="text-xs text-gray-500 hover:text-blue-600"><i class="fas fa-arrow-left"></i> Back to Hub</a>
        </div>
        <nav class="p-4 space-y-1">
            <a href="#concepts" class="block px-4 py-2 rounded text-sm hover:bg-blue-50 text-gray-700">Core Concepts</a>
            <a href="#state" class="block px-4 py-2 rounded text-sm hover:bg-blue-50 text-gray-700">State & Graph</a>
            <a href="#basic" class="block px-4 py-2 rounded text-sm hover:bg-blue-50 text-gray-700">Basic Example</a>
            <a href="#conditional" class="block px-4 py-2 rounded text-sm hover:bg-blue-50 text-gray-700">Conditional
                Edges</a>
            <a href="#memory" class="block px-4 py-2 rounded text-sm hover:bg-blue-50 text-gray-700">Persistence
                (Memory)</a>
            <a href="#human"
                class="block px-4 py-2 rounded text-sm hover:bg-blue-50 text-gray-700">Human-in-the-loop</a>
        </nav>
    </aside>

    <main class="lg:ml-64 flex-1 p-8 md:p-12">
        <h1 class="text-4xl font-bold mb-8">LangGraph Refresher</h1>

        <section id="concepts" class="mb-12 bg-white p-6 rounded-lg shadow-sm border">
            <h2 class="text-2xl font-bold mb-4">Philosophy</h2>
            <p class="mb-4">LangGraph is a library for building stateful, multi-actor applications with LLMs. Unlike
                CrewAI (which is DAG/process-focused), LangGraph is <strong>cyclic</strong>. It allows loops, making it
                ideal for agentic behaviors where an agent may need to try, fail, correct, and try again.</p>
            <div class="grid grid-cols-2 gap-4 mt-4">
                <div class="bg-blue-50 p-4 rounded"><strong>Nodes</strong>: Functions that do work (call LLM, run tool).
                </div>
                <div class="bg-blue-50 p-4 rounded"><strong>Edges</strong>: Control flow (Go from A to B).</div>
                <div class="bg-blue-50 p-4 rounded"><strong>State</strong>: Shared data object passed between nodes.
                </div>
                <div class="bg-blue-50 p-4 rounded"><strong>Conditional Edges</strong>: Logic to decide where to go next
                    (If/Else).</div>
            </div>
        </section>

        <section id="state" class="mb-12">
            <h2 class="text-2xl font-bold mb-4">1. Defining State</h2>
            <p class="mb-4">The `State` is a TypedDict that holds the context. Every node receives this state, modifies
                it, and passes it on.</p>
            <pre><code class="language-python">from typing import TypedDict, Annotated
import operator

# 'add' reducer allows messages to be appended rather than overwritten
class AgentState(TypedDict):
    messages: Annotated[list, operator.add]
    current_step: str
    user_info: dict</code></pre>
        </section>

        <section id="basic" class="mb-12">
            <h2 class="text-2xl font-bold mb-4">2. Basic Graph Structure</h2>
            <pre><code class="language-python">from langgraph.graph import StateGraph, END

# 1. Define Nodes (Functions)
def chatbot(state: AgentState):
    return {"messages": ["Hello from bot!"]}

def tool_node(state: AgentState):
    return {"messages": ["Tool result"]}

# 2. Build Graph
workflow = StateGraph(AgentState)

# 3. Add Nodes
workflow.add_node("chatbot", chatbot)
workflow.add_node("tools", tool_node)

# 4. Add Edges (Flow)
workflow.set_entry_point("chatbot")
workflow.add_edge("chatbot", "tools")
workflow.add_edge("tools", END)

# 5. Compile
app = workflow.compile()

# 6. Run
result = app.invoke({"messages": ["Hi"]})</code></pre>
        </section>

        <section id="conditional" class="mb-12">
            <h2 class="text-2xl font-bold mb-4">3. Conditional Edges (Router)</h2>
            <p class="mb-4">This is how agents make decisions. After a node runs, a function decides which node runs
                next.</p>
            <pre><code class="language-python">def route_tools(state: AgentState):
    last_message = state["messages"][-1]
    if "tool_calls" in last_message:
        return "tools" # Name of the node to go to
    return "end" # Special END node

workflow.add_conditional_edges(
    "chatbot",      # From this node
    route_tools,    # Run this logic
    {               # Map logic output to Nodes
        "tools": "tools",
        "end": END
    }
)</code></pre>
        </section>

        <section id="memory" class="mb-12">
            <h2 class="text-2xl font-bold mb-4">4. Persistence (Memory)</h2>
            <p class="mb-4">LangGraph uses "Checkpointers" to save state. This allows you to pause, resume, or keep
                history across sessions.</p>
            <pre><code class="language-python">from langgraph.checkpoint.memory import MemorySaver

memory = MemorySaver()
app = workflow.compile(checkpointer=memory)

# Need a thread_id to track the session
config = {"configurable": {"thread_id": "user-123"}}

# First run
app.invoke({"messages": ["Hi"]}, config=config)

# Second run (Remembers "Hi")
app.invoke({"messages": ["My name is Bob"]}, config=config)</code></pre>
        </section>

    </main>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
</body>

</html>